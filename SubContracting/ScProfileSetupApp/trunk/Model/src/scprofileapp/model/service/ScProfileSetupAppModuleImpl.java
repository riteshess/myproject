package scprofileapp.model.service;

import adf.utils.ebiz.EbizParams;
import adf.utils.model.ADFModelUtils;

import javax.faces.application.FacesMessage;

import oracle.jbo.ViewCriteria;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewObjectImpl;

import org.apache.myfaces.trinidad.context.RequestContext;

import scprofileapp.model.service.common.ScProfileSetupAppModule;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Mon Sep 14 12:17:09 IST 2015
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class ScProfileSetupAppModuleImpl extends ApplicationModuleImpl implements ScProfileSetupAppModule {
    /**
     * This is the default constructor (do not remove).
     */
    public ScProfileSetupAppModuleImpl() {
    }

    /**
     * Main Execution Method.
     * Used for first time Filter Data.
     * @return void
     * */
    public void setExecuteMainMethod() {
        RequestContext.getCurrentInstance().getPageFlowScope().put("PAGE_MODE", "V");

        ViewCriteria cR = this.getOrgScPrfVO1().getViewCriteria("OrgScPrfVOCriteria");
        this.getOrgScPrfVO1().applyViewCriteria(cR);
        this.getOrgScPrfVO1().setNamedWhereClauseParam("BindHoOrgId", EbizParams.GLBL_HO_ORG_ID());
        this.getOrgScPrfVO1().setNamedWhereClauseParam("BindOrgId", EbizParams.GLBL_APP_USR_ORG());
        this.getOrgScPrfVO1().setNamedWhereClauseParam("BindSlocId", EbizParams.GLBL_APP_SERV_LOC());
        this.getOrgScPrfVO1().setNamedWhereClauseParam("BindCldId", EbizParams.GLBL_APP_CLD_ID());
        this.getOrgScPrfVO1().executeQuery();
    }

    /**
     * Freeze Profile Method
     * @return void
     * */
    public void FreezeProfileMethod() {
        this.getOrgScPrfVO1().getCurrentRow().setAttribute("FreezePrf", "Y");
        this.getDBTransaction().commit();
        ADFModelUtils.showFormattedFacesMessage("Subcontracting Profile Setup",
                                                "Profile Freezed Successfully.".toString(), FacesMessage.SEVERITY_INFO);
    }

    /**
     * Row Count for Validation
     * */
    public Integer returnRowCount() {
        Integer i = 0;
        int count = this.getOrgScPrfVO1().getRowCount();
        if (count > 0) {
            i = count;
        }
        return i;
    }

    /**
     * Container's getter for OrgScPrfVO1.
     * @return OrgScPrfVO1
     */
    public ViewObjectImpl getOrgScPrfVO1() {
        return (ViewObjectImpl) findViewObject("OrgScPrfVO1");
    }
}

