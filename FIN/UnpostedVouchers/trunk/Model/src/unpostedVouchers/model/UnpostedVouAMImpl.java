package unpostedVouchers.model;

import javax.el.ELContext;
import javax.el.ExpressionFactory;

import javax.el.ValueExpression;

import javax.faces.application.Application;
import javax.faces.context.FacesContext;

import oracle.jbo.ViewCriteria;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewObjectImpl;

import unpostedVouchers.model.common.UnpostedVouAM;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Tue Apr 08 14:45:51 IST 2014
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class UnpostedVouAMImpl extends ApplicationModuleImpl implements UnpostedVouAM {
    /**
     * This is the default constructor (do not remove).
     */
    public UnpostedVouAMImpl() {
    }

    /**
     * Container's getter for UnpostedVouchersVO1.
     * @return UnpostedVouchersVO1
     */
    public ViewObjectImpl getUnpostedVouchersVO1() {
        return (ViewObjectImpl)findViewObject("UnpostedVouchersVO1");
    }
    
    
    /**
     * Function to call a database procedure "transalate_to_gl" for translating temporary voucher to GL.
     * */
    public String resolvEl(String data) {
        FacesContext fc = FacesContext.getCurrentInstance();
        Application app = fc.getApplication();
        ExpressionFactory elFactory = app.getExpressionFactory();
        ELContext elContext = fc.getELContext();
        ValueExpression valueExp = elFactory.createValueExpression(elContext, data, Object.class);
        String Message = valueExp.getValue(elContext).toString();
        return Message;
    }

    
    
    
    
    
    
    
    
    
    public void setBindVar(){
        Integer userId = Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_USR}"));
        String hoOrg_id = resolvEl("#{pageFlowScope.GLBL_HO_ORG_ID}");
        String cld_id = resolvEl("#{pageFlowScope.GLBL_APP_CLD_ID}");
        String orgId = resolvEl("#{pageFlowScope.GLBL_APP_USR_ORG}");
        Integer slocId = Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_SERV_LOC}"));
        
      //  this.getUnpostedVouchersVO1().getViewCriteria();
        ViewCriteria vc1=this.getUnpostedVouchersVO1().getViewCriteria("UnpostedVouchersVOCriteria");
                     this.getUnpostedVouchersVO1().applyViewCriteria(vc1);
                     this.getUnpostedVouchersVO1().setNamedWhereClauseParam("BindCldId",cld_id );
                     this.getUnpostedVouchersVO1().setNamedWhereClauseParam("BindSlocId",slocId);
                     this.getUnpostedVouchersVO1().setNamedWhereClauseParam("BindOrgId",orgId);
                    this.getUnpostedVouchersVO1().setNamedWhereClauseParam("BindUsrId",userId );
                    this.getUnpostedVouchersVO1().setNamedWhereClauseParam("BindHoRgId",hoOrg_id);
                  this.getUnpostedVouchersVO1().executeQuery();
        
        
        
        
    }
}
