package revenueprd.model.module;

import java.math.BigInteger;

import javax.el.ELContext;
import javax.el.ExpressionFactory;

import javax.el.ValueExpression;

import javax.faces.application.Application;
import javax.faces.context.FacesContext;

import oracle.jbo.domain.Date;
import oracle.jbo.server.ApplicationModuleImpl;

import oracle.jbo.server.ViewLinkImpl;
import oracle.jbo.server.ViewObjectImpl;

import revenueprd.model.module.common.RevenuePrdAM;


// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Sat Jun 01 14:16:35 IST 2013
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class RevenuePrdAMImpl extends ApplicationModuleImpl {
    /**
     * This is the default constructor (do not remove).
     */
    public RevenuePrdAMImpl() {
    }


    /**
     * Container's getter for RevenueMstVO.
     * @return RevenueMstVO
     */
    public ViewObjectImpl getRevenueMstVO() {
        return (ViewObjectImpl)findViewObject("RevenueMstVO");
    }

    /**
     * @param p_org_id
     * @param p_cld_id
     * @param p_coa_id
     * @param p_str_dt
     * @param p_end_dt
     * This method has been called to set the parameters for revenue master page.
     * **/

    public void setRevenueMstParameters(String p_cld_id, String p_org_id, BigInteger p_coa_id, String p_coa_nm,
                                        Date p_str_dt, Date p_end_dt) {
        System.out.println("p_str_dt " + p_str_dt);
        System.out.println("p_end_dt " + p_end_dt);
        System.out.println("p_coa_nm " + p_coa_nm);
        this.getRevenueMstVO().setNamedWhereClauseParam("BindCldId", p_cld_id);
        this.getRevenueMstVO().setNamedWhereClauseParam("BindSlocId", Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_SERV_LOC}")));
        this.getRevenueMstVO().setNamedWhereClauseParam("BindOrgId", p_org_id);
        this.getRevenueMstVO().setNamedWhereClauseParam("BindHoOrgId", resolvEl("#{pageFlowScope.GLBL_HO_ORG_ID}"));
        this.getRevenueMstVO().setNamedWhereClauseParam("BindCoaNm", p_coa_nm);
        this.getRevenueMstVO().setNamedWhereClauseParam("BindStrDt", p_str_dt);
        this.getRevenueMstVO().setNamedWhereClauseParam("BindEndDt", p_end_dt);
        this.getRevenueMstVO().executeQuery();


    }

    /**
     * @param p_org_id
     * @param p_cld_id
     * @param p_coa_id
     * @param p_str_dt
     * @param p_end_dt
     * This method has been called to set the parameters for revenue Prd page.
     * **/

    public void setRevenuePrdParameters(String p_cld_id, String p_org_id, BigInteger p_coa_id, Date p_str_dt,
                                        Date p_end_dt, String p_vou_id) {

        System.out.println("voucher id is "+p_vou_id);
        System.out.println("voucher start date is = "+p_str_dt);
        System.out.println("voucher end date is = "+p_end_dt);
        ViewObjectImpl revenuePrdVo = this.getRevenuePrd1();
        //revenuePrdVo.setNamedWhereClauseParam("BindCldId", p_cld_id);
        //revenuePrdVo.setNamedWhereClauseParam("BindOrgId", p_org_id);
        revenuePrdVo.setNamedWhereClauseParam("BindStrDt", p_str_dt);
        revenuePrdVo.setNamedWhereClauseParam("BindEndDt", p_end_dt);
        revenuePrdVo.setNamedWhereClauseParam("VouIdBindVar", p_vou_id);
        revenuePrdVo.executeQuery();

    }

    /**
     * @param p_org_id
     * @param p_cld_id
     * @param p_coa_id
     * @param p_str_dt
     * @param p_end_dt
     * This method has been called as first activity in the task flow to set the global parameters
     * **/
    public void setGlobalParameters(String p_cld_id, String p_org_id, BigInteger p_coa_id, Date p_str_dt,
                                    Date p_end_dt) {
        this.setRevenueMstParameters(p_cld_id, p_org_id, null, null, null, null);
      //  this.setRevenuePrdParameters(p_cld_id, p_org_id, null, null, null, null);

    }

    /**
     * Container's getter for RevenuePrd1.
     * @return RevenuePrd1
     */
    public ViewObjectImpl getRevenuePrd1() {
        return (ViewObjectImpl)findViewObject("RevenuePrd1");
    }

    /**
     * Container's getter for RevenueMstToRevenueDtlVL1.
     * @return RevenueMstToRevenueDtlVL1
     */
    public ViewLinkImpl getRevenueMstToRevenueDtlVL1() {
        return (ViewLinkImpl)findViewLink("RevenueMstToRevenueDtlVL1");
    }  
   
       /**
     * Container's getter for SearchVO1.
     * @return SearchVO1
     */
    public ViewObjectImpl getSearchVO1() {
        return (ViewObjectImpl)findViewObject("SearchVO1");
    }
       public void setMstVoParameter() {
           ViewObjectImpl vo=this.getRevenueMstVO();        
           vo.setNamedWhereClauseParam("BindCldId", resolvEl("#{pageFlowScope.GLBL_APP_CLD_ID}"));
           vo.setNamedWhereClauseParam("BindSlocId", Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_SERV_LOC}")));
           vo.setNamedWhereClauseParam("BindOrgId", resolvEl("#{pageFlowScope.GLBL_APP_USR_ORG}"));
           vo.setNamedWhereClauseParam("BindHoOrgId", resolvEl("#{pageFlowScope.GLBL_HO_ORG_ID}"));
           vo.executeQuery();
           
       }
    public String resolvEl(String data) {
              FacesContext fc = FacesContext.getCurrentInstance();
              Application app = fc.getApplication();
              ExpressionFactory elFactory = app.getExpressionFactory();
              ELContext elContext = fc.getELContext();
              ValueExpression valueExp = elFactory.createValueExpression(elContext, data, Object.class);
              String msg = valueExp.getValue(elContext).toString();
              return msg;
          }
}
