package salesoutstandingapp.model.services;

import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;

import javax.faces.application.Application;
import javax.faces.context.FacesContext;

import oracle.jbo.Row;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewLinkImpl;
import oracle.jbo.server.ViewObjectImpl;

import salesoutstandingapp.model.services.common.SLSSalesOutstandingAM;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Dec 18 18:34:14 IST 2013
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SLSSalesOutstandingAMImpl extends ApplicationModuleImpl implements SLSSalesOutstandingAM {
    /**
     * This is the default constructor (do not remove).
     */
    public SLSSalesOutstandingAMImpl() {
    }

    /**
     * Container's getter for OutstandingGraphVo.
     * @return OutstandingGraphVo
     */
    public ViewObjectImpl getOutstandingGraphVo() {
        return (ViewObjectImpl)findViewObject("OutstandingGraphVo");
    }

    /**
     * Container's getter for OutstandingTableVo.
     * @return OutstandingTableVo
     */
    public ViewObjectImpl getOutstandingTableVo() {
        return (ViewObjectImpl)findViewObject("OutstandingTableVo");
    }
    
    /**
     * Method for resolving the El
     */
    public String resolvEl(String data) {
        FacesContext fc = FacesContext.getCurrentInstance();
        Application app = fc.getApplication();
        ExpressionFactory elFactory = app.getExpressionFactory();
        ELContext elContext = fc.getELContext();
        ValueExpression valueExp = elFactory.createValueExpression(elContext, data, Object.class);
        String Message = valueExp.getValue(elContext).toString();
        return Message;
    }
    /**
     * Method to set bindvariables in views
     */
    public void setBindVariables(){
        Integer slocId = Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_SERV_LOC}"));
        StringBuffer cldId = new StringBuffer(resolvEl("#{pageFlowScope.GLBL_APP_CLD_ID}"));
        StringBuffer orgId = new StringBuffer(resolvEl("#{pageFlowScope.GLBL_APP_USR_ORG}"));
        ViewObjectImpl graphVo = this.getOutstandingGraphVo();
        graphVo.setNamedWhereClauseParam("SlocIdBind", slocId);
        graphVo.setNamedWhereClauseParam("OrgIdBind", orgId.toString());
        graphVo.setNamedWhereClauseParam("CldIdBind", cldId.toString());
        graphVo.setNamedWhereClauseParam("CoaIdBind", 2694);
        graphVo.executeQuery();
        
        ViewObjectImpl tableVo = this.getOutstandingTableVo();
        tableVo.setNamedWhereClauseParam("SlocIdBind", slocId);
        tableVo.setNamedWhereClauseParam("OrgIdBind", orgId.toString());
        tableVo.setNamedWhereClauseParam("CldIdBind", cldId.toString());
        tableVo.setNamedWhereClauseParam("CoaIdBind", 2694);
        tableVo.executeQuery();
    }

    /**
     * Container's getter for TempVo.
     * @return TempVo
     */
    public ViewObjectImpl getTempVo() {
        return (ViewObjectImpl)findViewObject("TempVo");
    }
    
    public void setCoaNm(){
        Row currentRow = this.getTempVo().getCurrentRow();
        if(currentRow != null){
            Integer coaId = (Integer)currentRow.getAttribute("CoaIdTrans");
            ViewObjectImpl graphVo = this.getOutstandingGraphVo();
            graphVo.setNamedWhereClauseParam("CoaIdBind", coaId);
            graphVo.executeQuery();
            ViewObjectImpl impl = this.getOutstandingTableVo();
            impl.setNamedWhereClauseParam("CoaIdBind", coaId);
            impl.executeQuery();
        }
    }

    /**
     * Container's getter for OutstandingDetailsVo.
     * @return OutstandingDetailsVo
     */
    public ViewObjectImpl getOutstandingDetailsVo() {
        return (ViewObjectImpl)findViewObject("OutstandingDetailsVo");
    }

    /**
     * Container's getter for OutstandingTableTOOutstandingDetailsVL1.
     * @return OutstandingTableTOOutstandingDetailsVL1
     */
    public ViewLinkImpl getOutstandingTableTOOutstandingDetailsVL1() {
        return (ViewLinkImpl)findViewLink("OutstandingTableTOOutstandingDetailsVL1");
    }
}
