package slssaleseocreditlimit.model.services;

import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;

import javax.faces.application.Application;
import javax.faces.context.FacesContext;

import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewObjectImpl;

import slssaleseocreditlimit.model.services.common.SLSSalesEoCreditLimitVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Tue Dec 10 10:15:47 IST 2013
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SLSSalesEoCreditLimitVOImpl extends ApplicationModuleImpl implements SLSSalesEoCreditLimitVO {
    
    
    
    /**
     * This is the default constructor (do not remove).
     */
    public SLSSalesEoCreditLimitVOImpl() {
    }

    /**
     * Container's getter for EoCreditLimit.
     * @return EoCreditLimit
     */
    public ViewObjectImpl getEoCreditLimit() {
        return (ViewObjectImpl)findViewObject("EoCreditLimit");
    }

    /**
     * Container's getter for Temp.
     * @return Temp
     */
    public ViewObjectImpl getTemp() {
        return (ViewObjectImpl)findViewObject("Temp");
    }
    /**
     * Method for resolving the El
     */
    public String resolvEl(String data) {
        FacesContext fc = FacesContext.getCurrentInstance();
        Application app = fc.getApplication();
        ExpressionFactory elFactory = app.getExpressionFactory();
        ELContext elContext = fc.getELContext();
        ValueExpression valueExp = elFactory.createValueExpression(elContext, data, Object.class);
        String Message = valueExp.getValue(elContext).toString();
        return Message;
    }
    /**
     * Method to set Initial bindVariables to viewObject 
     */
    public void setInitialBindVarables(){
        //Integer slocId = Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_SERV_LOC}"));
        //Integer userId = Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_USR}"));
        StringBuffer cldId = new StringBuffer(resolvEl("#{pageFlowScope.GLBL_APP_CLD_ID}"));
        StringBuffer orgId = new StringBuffer(resolvEl("#{pageFlowScope.GLBL_APP_USR_ORG}"));
        StringBuffer hoOrgId = new StringBuffer(resolvEl("#{pageFlowScope.GLBL_HO_ORG_ID}"));
        //StringBuffer eoId = new StringBuffer(resolvEl("#{pageFlowScope.EO_ID}"));
        ViewObjectImpl creditLimit = this.getEoCreditLimit();
        creditLimit.setNamedWhereClauseParam("OrgIdBind", orgId.toString());
        creditLimit.setNamedWhereClauseParam("CldIdBind", cldId.toString());
        creditLimit.setNamedWhereClauseParam("HoOrgIdBind", hoOrgId.toString());
        creditLimit.setNamedWhereClauseParam("EoNmBind", "-1");
        creditLimit.executeQuery();
        ViewObjectImpl graphCreditLimit = this.getGraphCreditVO();
        graphCreditLimit.setNamedWhereClauseParam("OrgIdBind", orgId.toString());
        graphCreditLimit.setNamedWhereClauseParam("CldIdBind", cldId.toString());
        graphCreditLimit.setNamedWhereClauseParam("HoOrgIdBind", hoOrgId.toString());
        graphCreditLimit.setNamedWhereClauseParam("EoNmBind", "-1");
        graphCreditLimit.executeQuery();

    }
    /**
     * Search
     */
    public void search(){
        Object eoNm = this.getTemp().getCurrentRow().getAttribute("EoNmTrans");
        if(eoNm != null){
            System.out.println("EO name :"+eoNm);
            ViewObjectImpl creditLimit = this.getEoCreditLimit();
            creditLimit.setNamedWhereClauseParam("EoNmBind", eoNm.toString());
            creditLimit.executeQuery();
            ViewObjectImpl graphCreditLimit = this.getGraphCreditVO();
            graphCreditLimit.setNamedWhereClauseParam("EoNmBind",  eoNm.toString());
            graphCreditLimit.executeQuery();
               
        }
        
    }
    /**
     * Reset
     */
    public void reset(){
        this.getTemp().getCurrentRow().setAttribute("EoNmTrans",null);
        ViewObjectImpl creditLimit = this.getEoCreditLimit();
        creditLimit.setNamedWhereClauseParam("EoNmBind",null);
        creditLimit.executeQuery();
    }

    /**
     * Container's getter for GraphCreditVO.
     * @return GraphCreditVO
     */
    public ViewObjectImpl getGraphCreditVO() {
        return (ViewObjectImpl)findViewObject("GraphCreditVO");
    }
}
