package mmPortTrackingApp.model.services;

import javax.el.ELContext;
import javax.el.ValueExpression;

import mmPortTrackingApp.model.services.common.MMPortTrackingAppModule;

import mmPortTrackingApp.model.views.MMDraftPOVOImpl;

import oracle.adf.share.ADFContext;

import oracle.jbo.Row;
import oracle.jbo.ViewCriteria;
import oracle.jbo.ViewObject;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewLinkImpl;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Thu Nov 13 10:59:24 IST 2014
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class MMPortTrackingAppModuleImpl extends ApplicationModuleImpl implements MMPortTrackingAppModule {
    /**
     * This is the default constructor (do not remove).
     */
    public MMPortTrackingAppModuleImpl() {
    }

    /**
     * Container's getter for MMDraftPOVO1.
     * @return MMDraftPOVO1
     */
    public MMDraftPOVOImpl getMMDraftPOVO1() {
        return (MMDraftPOVOImpl) findViewObject("MMDraftPOVO1");
    }

    /**
     * Container's getter for MMDraftPOPortVO1.
     * @return MMDraftPOPortVO1
     */
    public ViewObjectImpl getMMDraftPOPortVO1() {
        return (ViewObjectImpl) findViewObject("MMDraftPOPortVO1");
    }

    /**
     * Container's getter for MMDraftPOToPortsVL1.
     * @return MMDraftPOToPortsVL1
     */
    public ViewLinkImpl getMMDraftPOToPortsVL1() {
        return (ViewLinkImpl) findViewLink("MMDraftPOToPortsVL1");
    }

    public Object resolvEl(String data) {

        ADFContext adfCtx = ADFContext.getCurrent();
        ELContext elContext = adfCtx.getELContext();
        ValueExpression valueExp = adfCtx.getExpressionFactory().createValueExpression(elContext, data, Object.class);
        Object Message = valueExp.getValue(elContext).toString();

        return Message;
    }

    public Integer getSlocId() {
        return Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_SERV_LOC }").toString());
    }

    public StringBuffer getCldId() {
        return new StringBuffer(resolvEl("#{pageFlowScope.GLBL_APP_CLD_ID}").toString());
    }

    public StringBuffer getOrgId() {
        return new StringBuffer(resolvEl("#{pageFlowScope.GLBL_APP_USR_ORG}").toString());
    }

    public StringBuffer getHoOrgId() {
        return new StringBuffer(resolvEl("#{pageFlowScope.GLBL_HO_ORG_ID}").toString());
    }

    public Integer getUsrId() {
        return Integer.parseInt(resolvEl("#{pageFlowScope.GLBL_APP_USR}").toString());
    }


    public void setFilterData() {
        setFilterForDraftPO(getSlocId(), getCldId().toString(), getOrgId().toString());
        setFilterForSearch(getSlocId(), getCldId().toString(), getOrgId().toString());
        setFilterForLOVPOId(getSlocId(), getCldId().toString(), getOrgId().toString());
        setFilterForLOVSupplier(getSlocId(), getCldId().toString(), getOrgId().toString());
    }

    private void setFilterForLOVSupplier(Integer sloc, String cld, String org) {
    
         ViewObjectImpl draftPOVO1 = this.getLOVSupplierVO1();
         draftPOVO1.setNamedWhereClauseParam("BindSlocID", sloc);
         draftPOVO1.setNamedWhereClauseParam("BindCldId", cld);
         draftPOVO1.setNamedWhereClauseParam("BindOrgId", org);
         draftPOVO1.executeQuery();

     }
 
   private void setFilterForLOVPOId(Integer sloc, String cld, String org) {
 
        ViewObjectImpl draftPOVO1 = this.getLOVPOIdVP1();
        draftPOVO1.setNamedWhereClauseParam("BindSlocId", sloc);
        draftPOVO1.setNamedWhereClauseParam("BindCldId", cld);
        draftPOVO1.setNamedWhereClauseParam("BindOrgId", org);
        draftPOVO1.executeQuery();

    }

    private void setFilterForDraftPO(Integer sloc, String cld, String org) {

        ViewObject draftPOVO1 = this.getMMDraftPOVO1();
        System.out.println("Total no of rows " + draftPOVO1.getEstimatedRowCount());
        draftPOVO1.setNamedWhereClauseParam("BindSlocId", sloc);
        draftPOVO1.setNamedWhereClauseParam("BindCldId", cld);
        draftPOVO1.setNamedWhereClauseParam("BindOrgId", org);
        draftPOVO1.executeQuery();
        System.out.println("Total no of rows " + draftPOVO1.getEstimatedRowCount());

    }

    /**
     * Container's getter for SearchPortTrackingVO2.
     * @return SearchPortTrackingVO2
     */
    public ViewObjectImpl getSearchPortTrackingVO1() {
        return (ViewObjectImpl) findViewObject("SearchPortTrackingVO1");
    }

    private void setFilterForSearch(Integer sloc, String cld, String org) {

        ViewObjectImpl draftPOVO1 = this.getSearchPortTrackingVO1();
        draftPOVO1.setNamedWhereClauseParam("BindSlocId", sloc);
        draftPOVO1.setNamedWhereClauseParam("BindCldId", cld);
        draftPOVO1.setNamedWhereClauseParam("BindOrgId", org);
        draftPOVO1.executeQuery();
    }


    public void searchPortTracking() {

        Row first = this.getSearchPortTrackingVO1().first();

        ViewObjectImpl draftPOVO1 = this.getMMDraftPOVO1();
        draftPOVO1.setNamedWhereClauseParam("BindPoId", first.getAttribute("TransPOId"));
        draftPOVO1.setNamedWhereClauseParam("BindSupId" , first.getAttribute("TransSupId"));
        draftPOVO1.executeQuery();

    }

    public void resetPortTracking() {
        
        getSearchPortTrackingVO1().executeQuery();
        ViewObjectImpl draftPOVO1 = this.getMMDraftPOVO1();

        draftPOVO1.setNamedWhereClauseParam("BindPoId", null);
        draftPOVO1.setNamedWhereClauseParam("BindSupId" ,null);
        draftPOVO1.executeQuery();

    }

    /**
     * Container's getter for LOVPOIdVP1.
     * @return LOVPOIdVP1
     */
    public ViewObjectImpl getLOVPOIdVP1() {
        return (ViewObjectImpl) findViewObject("LOVPOIdVP1");
    }

    /**
     * Container's getter for LOVPortName1.
     * @return LOVPortName1
     */
    public ViewObjectImpl getLOVPortName1() {
        return (ViewObjectImpl) findViewObject("LOVPortName1");
    }

    /**
     * Container's getter for LOVSupplierVO1.
     * @return LOVSupplierVO1
     */
    public ViewObjectImpl getLOVSupplierVO1() {
        return (ViewObjectImpl) findViewObject("LOVSupplierVO1");
    }
}

