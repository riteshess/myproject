package bdgfinancebudgetapp.model.views;

import bdgfinancebudgetapp.model.services.BdgFinanceBudgetAMImpl;

import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;

import javax.faces.application.Application;
import javax.faces.context.FacesContext;

import oracle.jbo.Row;
import oracle.jbo.RowIterator;
import oracle.jbo.RowSet;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jbo.server.ViewRowImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Fri Apr 10 12:57:00 IST 2015
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class HeadMtlRegionMonthSummVWVORowImpl extends ViewRowImpl {
    /**
     * AttributesEnum: generated enum for identifying attributes and accessors. DO NOT MODIFY.
     */
    public enum AttributesEnum {
        CldId,
        SlocId,
        OrgId,
        HoOrgId,
        DocId,
        Region,
        ParamDesc,
        BdgMtlRegionMonthSumm;
        private static AttributesEnum[] vals = null;
        private static final int firstIndex = 0;

        public int index() {
            return AttributesEnum.firstIndex() + ordinal();
        }

        public static final int firstIndex() {
            return firstIndex;
        }

        public static int count() {
            return AttributesEnum.firstIndex() + AttributesEnum.staticValues().length;
        }

        public static final AttributesEnum[] staticValues() {
            if (vals == null) {
                vals = AttributesEnum.values();
            }
            return vals;
        }
    }
    public static final int CLDID = AttributesEnum.CldId.index();
    public static final int SLOCID = AttributesEnum.SlocId.index();
    public static final int ORGID = AttributesEnum.OrgId.index();
    public static final int HOORGID = AttributesEnum.HoOrgId.index();
    public static final int DOCID = AttributesEnum.DocId.index();
    public static final int REGION = AttributesEnum.Region.index();
    public static final int PARAMDESC = AttributesEnum.ParamDesc.index();
    public static final int BDGMTLREGIONMONTHSUMM = AttributesEnum.BdgMtlRegionMonthSumm.index();

    /**
     * This is the default constructor (do not remove).
     */
    public HeadMtlRegionMonthSummVWVORowImpl() {
    }

    /**
     * Gets the attribute value for the calculated attribute CldId.
     * @return the CldId
     */
    public String getCldId() {
        return (String) getAttributeInternal(CLDID);
    }

    /**
     * Gets the attribute value for the calculated attribute SlocId.
     * @return the SlocId
     */
    public Integer getSlocId() {
        return (Integer) getAttributeInternal(SLOCID);
    }

    /**
     * Gets the attribute value for the calculated attribute OrgId.
     * @return the OrgId
     */
    public String getOrgId() {
        return (String) getAttributeInternal(ORGID);
    }

    /**
     * Gets the attribute value for the calculated attribute HoOrgId.
     * @return the HoOrgId
     */
    public String getHoOrgId() {
        return (String) getAttributeInternal(HOORGID);
    }

    /**
     * Gets the attribute value for the calculated attribute DocId.
     * @return the DocId
     */
    public String getDocId() {
        return (String) getAttributeInternal(DOCID);
    }

    /**
     * Gets the attribute value for the calculated attribute Region.
     * @return the Region
     */
    public String getRegion() {
        return (String) getAttributeInternal(REGION);
    }

    /**
     * Gets the attribute value for the calculated attribute ParamDesc.
     * @return the ParamDesc
     */
    public String getParamDesc() {
        return (String) getAttributeInternal(PARAMDESC);
    }

    /**Method to resolve expression- returns String value*/
    private String resolvEl(String data) {
        String val = null;
        FacesContext fc = FacesContext.getCurrentInstance();
        Application app = fc.getApplication();
        ExpressionFactory elFactory = app.getExpressionFactory();
        ELContext elContext = fc.getELContext();
        ValueExpression valueExp = elFactory.createValueExpression(elContext, data, Object.class);
        Object Message = valueExp.getValue(elContext);
        if (Message != null) {
            val = Message.toString();
        }
        return val;
    }

    /**
     * Gets the associated <code>RowIterator</code> using master-detail link BdgMtlRegionMonthSumm.
     */
    public RowIterator getBdgMtlRegionMonthSumm() {
        if (resolvEl("#{pageFlowScope.P_MODE}").equalsIgnoreCase("V")) {
            RowSet rs = (RowSet) getAttributeInternal(BDGMTLREGIONMONTHSUMM);

            ViewObjectImpl bdgFinBudgetVO1 = this.getAm().getBdgFinBudgetVO1();
            bdgFinBudgetVO1.setNamedWhereClauseParam("BindCldId", this.getCldId());
            bdgFinBudgetVO1.setNamedWhereClauseParam("BindSlocId", this.getSlocId());
            bdgFinBudgetVO1.setNamedWhereClauseParam("BindHoOrgId", this.getHoOrgId());
            bdgFinBudgetVO1.setNamedWhereClauseParam("BindOrgId", this.getOrgId());
            bdgFinBudgetVO1.setNamedWhereClauseParam("docIdBind", resolvEl("#{pageFlowScope.P_DOC_ID}"));
            bdgFinBudgetVO1.executeQuery();

            Row[] allRowsInRange = bdgFinBudgetVO1.getAllRowsInRange();

            rs.setNamedWhereClauseParam("BindCldId", this.getCldId());
            rs.setNamedWhereClauseParam("BindSlocId", this.getSlocId());
            rs.setNamedWhereClauseParam("BindHoOrgId", this.getHoOrgId());
            rs.setNamedWhereClauseParam("BindOrgId", this.getOrgId());

            if (allRowsInRange.length > 0) {
                if (allRowsInRange[0].getAttribute("EoId") != null) {
                    rs.setNamedWhereClauseParam("BindEoId", allRowsInRange[0].getAttribute("EoId"));
                }

                if (allRowsInRange[0].getAttribute("PrdStartDt") != null) {
                    rs.setNamedWhereClauseParam("BindStDate", allRowsInRange[0].getAttribute("PrdStartDt"));
                }

                if (allRowsInRange[0].getAttribute("PrdEndDt") != null) {
                    rs.setNamedWhereClauseParam("BindEndDate", allRowsInRange[0].getAttribute("PrdEndDt"));
                }
            }

            rs.executeQuery();
            RowIterator ri = rs.createRowSetIterator(null);
            return ri;
        } else {
            return (RowIterator) getAttributeInternal(BDGMTLREGIONMONTHSUMM);
        }
    }

    /**
     * Method will return Application Module App
     */
    public BdgFinanceBudgetAMImpl getAm() {
        BdgFinanceBudgetAMImpl am = (BdgFinanceBudgetAMImpl) getApplicationModule();
        return am;
    }
}

